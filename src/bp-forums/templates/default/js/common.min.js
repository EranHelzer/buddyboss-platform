jQuery(document).ready(function(e){var t=jQuery("body").find(".bbp_topic_tags_dropdown"),o=[];t.length&&t.each(function(e,t){!(jQuery(t).parents(".elementor-location-popup").length>0)&&(jQuery(t).select2({dropdownParent:jQuery(t).closest("form").parent(),placeholder:jQuery(t).attr("placeholder"),minimumInputLength:1,closeOnSelect:!0,tags:!0,language:{errorLoading:function(){return bp_select2.i18n.errorLoading},inputTooLong:function(e){var t=e.input.length-e.maximum;return bp_select2.i18n.inputTooLong.replace("%%",t)},inputTooShort:function(e){return bp_select2.i18n.inputTooShort.replace("%%",e.minimum-e.input.length)},loadingMore:function(){return bp_select2.i18n.loadingMore},maximumSelected:function(e){return bp_select2.i18n.maximumSelected.replace("%%",e.maximum)},noResults:function(){return bp_select2.i18n.noResults},searching:function(){return bp_select2.i18n.searching},removeAllItems:function(){return bp_select2.i18n.removeAllItems}},dropdownCssClass:"bb-select-dropdown bb-tag-list-dropdown",containerCssClass:"bb-select-container",tokenSeparators:[","],ajax:{url:bbpCommonJsData.ajax_url,dataType:"json",delay:1e3,data:function(e){return jQuery.extend({},e,{_wpnonce:bbpCommonJsData.nonce,action:"search_tags"})},cache:!0,processResults:function(e){return!1===jQuery.isEmptyObject(o)&&jQuery.each(o,function(t,o){for(var n=0;n<e.data.results.length;n++)e.data.results[n].id===o&&e.data.results.splice(n,1)}),{results:e&&e.success?e.data.results:[]}}}}),jQuery(t).on("select2:select",function(e){var o=jQuery(t).closest("form"),n=o.find("#bbp_topic_tags"),r=n.val(),i=r&&r.length>0?r.split(","):[],a=e.params.data;i.push(a.id);var s=i.join(",");n.val(s),o.find(".select2-search__field").trigger("click"),o.find(".select2-search__field").trigger("click")}),jQuery(t).on("select2:unselect",function(e){var o=jQuery(t).closest("form"),n=e.params.data;o.find('.bbp_topic_tags_dropdown option[value="'+n.id+'"]').remove();var r=o.find(".bbp_topic_tags_dropdown option"),i=jQuery.map(r,function(e){return e.text}),a=(i=jQuery.grep(i,function(e){return e!==n.id})).join(",");o.find("#bbp_topic_tags").val(a),0===a.length&&jQuery(window).scrollTop(jQuery(window).scrollTop()+1)}))}),jQuery("body").on("click",".js-modal-close",function(){t.val(""),t.trigger("change"),jQuery("body").removeClass("popup-modal-reply"),jQuery(".medium-editor-toolbar").removeClass("active medium-editor-toolbar-active"),jQuery("#show-toolbar-button").removeClass("active"),jQuery("medium-editor-action").removeClass("medium-editor-button-active"),jQuery(".medium-editor-toolbar-actions").show(),jQuery(".medium-editor-toolbar-form").removeClass("medium-editor-toolbar-form-active"),jQuery("#whats-new-attachments .bb-url-scrapper-container").remove()}),window.addEventListener("unload",function(){var e=jQuery(".bbp-topic-form form");e.length>0&&e[0].reset()});var n=jQuery("body .bbp-topic-reply-link");n.length&&n.click(function(){jQuery("body").addClass("popup-modal-reply"),t.val(""),t.trigger("change")}),"undefined"!=typeof BP_Nouveau&&void 0!==BP_Nouveau.media&&void 0!==BP_Nouveau.media.emoji&&jQuery(".bbp-the-content").length&&void 0!==jQuery.prototype.emojioneArea&&jQuery(".bbp-the-content").each(function(t,o){var n=jQuery(o).attr("id"),r=jQuery(o).data("key");jQuery("#"+n).emojioneArea({standalone:!0,hideSource:!1,container:jQuery("#"+n).closest("form").find("#whats-new-toolbar > .post-emoji"),autocomplete:!1,pickerPosition:"bottom",hidePickerOnBlur:!0,useInternalCDN:!1,events:{ready:function(){void 0!==window.forums_medium_topic_editor&&void 0!==window.forums_medium_topic_editor[r]&&window.forums_medium_topic_editor[r].resetContent(),void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[r]&&window.forums_medium_reply_editor[r].resetContent(),void 0!==window.forums_medium_forum_editor&&void 0!==window.forums_medium_forum_editor[r]&&window.forums_medium_forum_editor[r].resetContent()},emojibtn_click:function(){void 0!==window.forums_medium_topic_editor&&void 0!==window.forums_medium_topic_editor[r]&&window.forums_medium_topic_editor[r].checkContentChanged(),void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[r]&&window.forums_medium_reply_editor[r].checkContentChanged(),void 0!==window.forums_medium_forum_editor&&void 0!==window.forums_medium_forum_editor[r]&&window.forums_medium_forum_editor[r].checkContentChanged(),void 0===window.forums_medium_topic_editor&&e("#bbpress-forums .bbp-the-content").keyup(),jQuery("#"+n)[0].emojioneArea.hidePicker()},search_keypress:function(){var e=this.search.val().toLowerCase();this.search.val(e)},picker_show:function(){e(this.button[0]).closest(".post-emoji").addClass("active")},picker_hide:function(){e(this.button[0]).closest(".post-emoji").removeClass("active")}}})}),window.elementorFrontend&&jQuery(document).on("elementor/popup/show",function(){var e=jQuery("body").find("div.elementor-location-popup").find(".bbp_topic_tags_dropdown");e.length&&(e.select2({placeholder:e.attr("placeholder"),dropdownParent:e.closest("form").parent(),minimumInputLength:1,closeOnSelect:!0,tags:!0,language:{errorLoading:function(){return bp_select2.i18n.errorLoading},inputTooLong:function(e){var t=e.input.length-e.maximum;return bp_select2.i18n.inputTooLong.replace("%%",t)},inputTooShort:function(e){return bp_select2.i18n.inputTooShort.replace("%%",e.minimum-e.input.length)},loadingMore:function(){return bp_select2.i18n.loadingMore},maximumSelected:function(e){return bp_select2.i18n.maximumSelected.replace("%%",e.maximum)},noResults:function(){return bp_select2.i18n.noResults},searching:function(){return bp_select2.i18n.searching},removeAllItems:function(){return bp_select2.i18n.removeAllItems}},dropdownCssClass:"bb-select-dropdown bb-tag-list-dropdown",containerCssClass:"bb-select-container",tokenSeparators:[","],ajax:{url:bbpCommonJsData.ajax_url,dataType:"json",delay:1e3,data:function(e){return jQuery.extend({},e,{_wpnonce:bbpCommonJsData.nonce,action:"search_tags"})},cache:!0,processResults:function(e){return!1===jQuery.isEmptyObject(o)&&jQuery.each(o,function(t,o){for(var n=0;n<e.data.results.length;n++)e.data.results[n].id===o&&e.data.results.splice(n,1)}),{results:e&&e.success?e.data.results:[]}}}}),e.on("select2:select",function(e){var t=e.params.data;o.push(t.id);var n=o.join(",");jQuery("body #bbp_topic_tags").val(n),jQuery("body .select2-search__field").trigger("click"),jQuery("body .select2-search__field").trigger("click")}),e.on("select2:unselect",function(e){var t=e.params.data,n=(o=jQuery.grep(o,function(e){return e!==t.id})).join(",");jQuery("body #bbp_topic_tags").val(n),0===n.length&&jQuery(window).scrollTop(jQuery(window).scrollTop()+1)}))}),jQuery(document).on("input","#bbp_topic_title",function(e){""!==jQuery(e.currentTarget).val().trim()?jQuery(e.currentTarget).closest("form").addClass("has-title"):jQuery(e.currentTarget).closest("form").removeClass("has-title")}),0!==jQuery("textarea#bbp_topic_content").length&&jQuery("#bbp_topic_content").on("keyup",function(){""!==jQuery("#bbp_topic_content").val().trim()?jQuery(this).closest("form").addClass("has-content"):jQuery(this).closest("form").removeClass("has-content")}),0!==jQuery("textarea#bbp_reply_content").length&&jQuery("#bbp_reply_content").on("keyup",function(){""!==jQuery("#bbp_reply_content").val().trim()?jQuery(this).closest("form").addClass("has-content"):jQuery(this).closest("form").removeClass("has-content")}),jQuery(document).on("input",".bbp_editor_topic_content",function(e){var t=jQuery(e.currentTarget)[0];""===t.innerHTML.replace(/<p>/gi,"").replace(/<\/p>/gi,"").replace(/<br>/gi,"")&&(t.innerHTML="",jQuery("#bbp_topic_content").val(""))}),jQuery(document).on("input",".bbp_editor_reply_content",function(e){var t=jQuery(e.currentTarget)[0];""===t.innerHTML.replace(/<p>/gi,"").replace(/<\/p>/gi,"").replace(/<br>/gi,"")&&(t.innerHTML="",jQuery("#bbp_reply_content").val(""))})});