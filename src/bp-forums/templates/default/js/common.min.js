jQuery(document).ready((function(e){var o=jQuery("body").find(".bbp_topic_tags_dropdown"),t=[];o.length&&o.each((function(e,o){jQuery(o).parents(".elementor-location-popup").length>0||(jQuery(o).select2({dropdownParent:jQuery(o).closest("form").parent(),placeholder:jQuery(o).attr("placeholder"),minimumInputLength:1,closeOnSelect:!0,tags:!0,language:{errorLoading:function(){return bp_select2.i18n.errorLoading},inputTooLong:function(e){var o=e.input.length-e.maximum;return bp_select2.i18n.inputTooLong.replace("%%",o)},inputTooShort:function(e){return bp_select2.i18n.inputTooShort.replace("%%",e.minimum-e.input.length)},loadingMore:function(){return bp_select2.i18n.loadingMore},maximumSelected:function(e){return bp_select2.i18n.maximumSelected.replace("%%",e.maximum)},noResults:function(){return bp_select2.i18n.noResults},searching:function(){return bp_select2.i18n.searching},removeAllItems:function(){return bp_select2.i18n.removeAllItems}},dropdownCssClass:"bb-select-dropdown bb-tag-list-dropdown",containerCssClass:"bb-select-container",tokenSeparators:[","],ajax:{url:bbpCommonJsData.ajax_url,dataType:"json",delay:1e3,data:function(e){return jQuery.extend({},e,{_wpnonce:bbpCommonJsData.nonce,action:"search_tags"})},cache:!0,processResults:function(e){return!1===jQuery.isEmptyObject(t)&&jQuery.each(t,(function(o,t){for(var r=0;r<e.data.results.length;r++)e.data.results[r].id===t&&e.data.results.splice(r,1)})),{results:e&&e.success?e.data.results:[]}}}}),jQuery(o).on("select2:select",(function(e){var t=jQuery(o).closest("form"),r=t.find("#bbp_topic_tags"),n=r.val(),i=n&&n.length>0?n.split(","):[],u=e.params.data;i.push(u.id);var s=i.join(",");r.val(s),t.find(".select2-search__field").trigger("click"),t.find(".select2-search__field").trigger("click")})),jQuery(o).on("select2:unselect",(function(e){var t=jQuery(o).closest("form"),r=e.params.data;t.find('.bbp_topic_tags_dropdown option[value="'+r.id+'"]').remove();var n=t.find(".bbp_topic_tags_dropdown option"),i=jQuery.map(n,(function(e){return e.text})),u=(i=jQuery.grep(i,(function(e){return e!==r.id}))).join(",");t.find("#bbp_topic_tags").val(u),0===u.length&&jQuery(window).scrollTop(jQuery(window).scrollTop()+1)})))})),jQuery("body").on("click",".js-modal-close",(function(){o.val(""),o.trigger("change"),jQuery("body").removeClass("popup-modal-reply"),jQuery(".medium-editor-toolbar").removeClass("active medium-editor-toolbar-active"),jQuery("#show-toolbar-button").removeClass("active"),jQuery("medium-editor-action").removeClass("medium-editor-button-active"),jQuery(".medium-editor-toolbar-actions").show(),jQuery(".medium-editor-toolbar-form").removeClass("medium-editor-toolbar-form-active"),jQuery("#whats-new-attachments .bb-url-scrapper-container").remove()}));var r=jQuery("body .bbp-topic-reply-link");r.length&&r.click((function(){jQuery("body").addClass("popup-modal-reply"),o.val(""),o.trigger("change")})),"undefined"!=typeof BP_Nouveau&&void 0!==BP_Nouveau.media&&void 0!==BP_Nouveau.media.emoji&&jQuery(".bbp-the-content").length&&void 0!==jQuery.prototype.emojioneArea&&jQuery(".bbp-the-content").each((function(o,t){var r=jQuery(t).attr("id"),n=jQuery(t).data("key");jQuery("#"+r).emojioneArea({standalone:!0,hideSource:!1,container:jQuery("#"+r).closest("form").find("#whats-new-toolbar > .post-emoji"),autocomplete:!1,pickerPosition:"bottom",hidePickerOnBlur:!0,useInternalCDN:!1,events:{ready:function(){void 0!==window.forums_medium_topic_editor&&void 0!==window.forums_medium_topic_editor[n]&&window.forums_medium_topic_editor[n].resetContent(),void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[n]&&window.forums_medium_reply_editor[n].resetContent(),void 0!==window.forums_medium_forum_editor&&void 0!==window.forums_medium_forum_editor[n]&&window.forums_medium_forum_editor[n].resetContent()},emojibtn_click:function(){void 0!==window.forums_medium_topic_editor&&void 0!==window.forums_medium_topic_editor[n]&&window.forums_medium_topic_editor[n].checkContentChanged(),void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[n]&&window.forums_medium_reply_editor[n].checkContentChanged(),void 0!==window.forums_medium_forum_editor&&void 0!==window.forums_medium_forum_editor[n]&&window.forums_medium_forum_editor[n].checkContentChanged(),void 0===window.forums_medium_topic_editor&&e("#bbpress-forums .bbp-the-content").keyup(),jQuery("#"+r)[0].emojioneArea.hidePicker()},search_keypress:function(){var e=this.search.val().toLowerCase();this.search.val(e)},picker_show:function(){e(this.button[0]).closest(".post-emoji").addClass("active")},picker_hide:function(){e(this.button[0]).closest(".post-emoji").removeClass("active")}}})})),window.elementorFrontend&&jQuery(document).on("elementor/popup/show",(function(){var e=jQuery("body").find("div.elementor-location-popup").find(".bbp_topic_tags_dropdown");e.length&&(e.select2({placeholder:e.attr("placeholder"),dropdownParent:e.closest("form").parent(),minimumInputLength:1,closeOnSelect:!0,tags:!0,language:{errorLoading:function(){return bp_select2.i18n.errorLoading},inputTooLong:function(e){var o=e.input.length-e.maximum;return bp_select2.i18n.inputTooLong.replace("%%",o)},inputTooShort:function(e){return bp_select2.i18n.inputTooShort.replace("%%",e.minimum-e.input.length)},loadingMore:function(){return bp_select2.i18n.loadingMore},maximumSelected:function(e){return bp_select2.i18n.maximumSelected.replace("%%",e.maximum)},noResults:function(){return bp_select2.i18n.noResults},searching:function(){return bp_select2.i18n.searching},removeAllItems:function(){return bp_select2.i18n.removeAllItems}},dropdownCssClass:"bb-select-dropdown bb-tag-list-dropdown",containerCssClass:"bb-select-container",tokenSeparators:[","],ajax:{url:bbpCommonJsData.ajax_url,dataType:"json",delay:1e3,data:function(e){return jQuery.extend({},e,{_wpnonce:bbpCommonJsData.nonce,action:"search_tags"})},cache:!0,processResults:function(e){return!1===jQuery.isEmptyObject(t)&&jQuery.each(t,(function(o,t){for(var r=0;r<e.data.results.length;r++)e.data.results[r].id===t&&e.data.results.splice(r,1)})),{results:e&&e.success?e.data.results:[]}}}}),e.on("select2:select",(function(e){var o=e.params.data;t.push(o.id);var r=t.join(",");jQuery("body #bbp_topic_tags").val(r),jQuery("body .select2-search__field").trigger("click"),jQuery("body .select2-search__field").trigger("click")})),e.on("select2:unselect",(function(e){var o=e.params.data,r=(t=jQuery.grep(t,(function(e){return e!==o.id}))).join(",");jQuery("body #bbp_topic_tags").val(r),0===r.length&&jQuery(window).scrollTop(jQuery(window).scrollTop()+1)})))})),jQuery(document).on("input","#bbp_topic_title",(function(e){console.log(jQuery(e.currentTarget).val().trim()),""!==jQuery(e.currentTarget).val().trim()?jQuery(e.currentTarget).closest("form").addClass("has-title"):jQuery(e.currentTarget).closest("form").removeClass("has-title")})),0!==jQuery("textarea#bbp_topic_content").length&&jQuery("#bbp_topic_content").on("keyup",(function(){""!==jQuery("#bbp_topic_content").val().trim()?jQuery(this).closest("form").addClass("has-content"):jQuery(this).closest("form").removeClass("has-content")})),0!==jQuery("textarea#bbp_reply_content").length&&jQuery("#bbp_reply_content").on("keyup",(function(){""!==jQuery("#bbp_reply_content").val().trim()?jQuery(this).closest("form").addClass("has-content"):jQuery(this).closest("form").removeClass("has-content")}))}));